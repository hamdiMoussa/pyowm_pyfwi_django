
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Markers Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" 
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" 
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
   
    <!-- Leaflet Draw CSS and JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha384-6DBIkDzKj1PHw3gW8skvQoAQ5KoG5ru5Ot1WmYvFxBn96yO9SB+4+W4A7WuL4izU"
    crossorigin=""/>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" integrity="sha512-1xhdQwMzS8Ly+5ZCvSk/Z9oGt92uI1FUpy2+vcD7zTkXXw06ivV8WgZ+flv7dX9tMJPCT8YENWQOv+7OxNwHvw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js" integrity="sha512-PnX6fRPjq/LiYD6rsRv6LZx6PZyoLCejr3q1ZDDtzAVT9T1TzT8OGpVEyTjjntPtd+bGwIzgm1orDjZi2QX6UQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.marker.bouncing/dist/leaflet.marker.bouncing.min.js"></script>


<script type="text/javascript"
        src="https://cdn.jsdelivr.net/gh/hosuaby/Leaflet.SmoothMarkerBouncing@v3.0.2/dist/bundle.js"
        crossorigin="anonymous"></script>


  </head>
  <body  style="background-color:#e9d58b; ">









    <div id="weather-info">
      <div class="card-body">
          <p><strong>Temperature:</strong> {{ data.temperature }}°C</p>
          <p><strong>Humidity:</strong> {{ data.humidity }}%</p>
          <p><strong>Wind Speed:</strong> {{ data.wind }} km/h</p>
      </div>
  </div>








 <script>
  
  $(document).ready(function() {
      setInterval(function() {
          $.ajax({
              url: "{% url 'update_weather' %}",
              type: "GET",
              success: function(data) {



                  $('#weather-info').html(
                      '<div class="card-body">' +
                         '<p><strong>Temperature:</strong> ' + data.temperature + '°C</p>' +
                         '<p><strong>Humidity:</strong> ' + data.humidity + '%</p>' +
                         '<p><strong>Wind Speed:</strong> ' + data.wind + ' km/h</p>' +
                      '</div>'
                  );
                
              },
              error: function(xhr, status, error) {
                  console.log("An error occurred: " + xhr.status + " " + xhr.statusText);
              }
          });
      }, 15000); // refresh every 5 seconds
  });
 </script>
 
 
 
 
 
 

 </body>
</html>

